<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Bargain Dish</title>
    <script
      type="text/javascript"
      src="https://openapi.map.naver.com/openapi/v3/maps.js?clientId=2si52JMswi_caKDaEDvY&submodules=geocoder"
    ></script>
    <script src="https://unpkg.com/ionicons@4.2.2/dist/ionicons.js"></script>
    <link rel="stylesheet" href="./css/reset.css" />
    <link rel="stylesheet" href="./css/index.css" />
    <meta name="theme-color" content="#ff7979" />
  </head>

  <body>
    <main class="main">
      <section class="header">
        <input
          type="text"
          class="search"
          placeholder="주소 또는 상호를 입력하세요."
        />
        <ion-icon name="funnel" class="header__icon--right"></ion-icon>
      </section>
      <div id="map"></div>
      <section class="nav">
        <ul class="nav__items">
          <a href="./index.html">
            <li class="nav__item nav__item--selected">
              <ion-icon name="map"></ion-icon>
            </li>
          </a>
          <a href="./orderList.html">
            <li class="nav__item"><ion-icon name="clipboard"></ion-icon></li>
          </a>
        </ul>
      </section>
    </main>
  </body>

  <script>
    var map = new naver.maps.Map("map");
    var myaddress = "대한민국 대전광역시 유성구 온천2동 412-11"; // 도로명 주소나 지번 주소만 가능 (건물명 불가!!!!)
    naver.maps.Service.geocode({ address: myaddress }, function(
      status,
      response
    ) {
      if (status !== naver.maps.Service.Status.OK) {
        return alert(myaddress + "의 검색 결과가 없거나 기타 네트워크 에러");
      }
      var result = response.result;
      // 검색 결과 갯수: result.total
      // 첫번째 결과 결과 주소: result.items[0].address
      // 첫번째 검색 결과 좌표: result.items[0].point.y, result.items[0].point.x
      var myaddr = new naver.maps.Point(
        result.items[0].point.x,
        result.items[0].point.y
      );
      map.setCenter(myaddr); // 검색된 좌표로 지도 이동

      // 마크 클릭시 인포윈도우 오픈
      var infowindow = new naver.maps.InfoWindow({
        content:
          '<a style="display:block; padding:15px;" href="./order.html"><h4 style="font-size:16px;">수수브레드</h4></a>'
      });

      var marker = new naver.maps.Marker({
        position: new naver.maps.LatLng(36.3619089, 127.34899640000003),
        map: map,
        icon: {
          url: "./images/marker.png",
          size: new naver.maps.Size(30, 35),
          origin: new naver.maps.Point(4, -5),
          anchor: new naver.maps.Point(11, 35)
        }
      });
      // 마커 클릭 이벤트 처리
      naver.maps.Event.addListener(marker, "click", function(e) {
        if (infowindow.getMap()) {
          infowindow.close();
        } else {
          infowindow.open(map, marker);
        }
      });
      // 마크 클릭시 인포윈도우 오픈
      var infowindow = new naver.maps.InfoWindow({
        content:
          '<a style="display:block; padding:10px; text-decoration:none; color:black;" href="./order.html"><h4 style="font-size:16px;">수수브레드</h4></a>',
        anchorSize: new naver.maps.Size(15, 15)
      });

      ////////////////////////////////////////////////////////////

      var marker2 = new naver.maps.Marker({
        position: new naver.maps.LatLng(36.3621532, 127.35142730000007),
        map: map,
        icon: {
          url: "./images/marker.png",
          size: new naver.maps.Size(30, 35),
          origin: new naver.maps.Point(4, -5),
          anchor: new naver.maps.Point(11, 35)
        }
      });
      // 마커 클릭 이벤트 처리
      naver.maps.Event.addListener(marker2, "click", function(e) {
        if (infowindow2.getMap()) {
          infowindow2.close();
        } else {
          infowindow2.open(map, marker2);
        }
      });
      // 마크 클릭시 인포윈도우 오픈
      var infowindow2 = new naver.maps.InfoWindow({
        content:
          '<a style="display:block; padding:10px; text-decoration:none; color:black;" href="./order.html"><h4 style="font-size:16px;">리코타코</h4></a>',
        anchorSize: new naver.maps.Size(15, 15)
      });

      ///////////////////////////////////////////////////////////////

      var marker3 = new naver.maps.Marker({
        position: new naver.maps.LatLng(36.3626673, 127.34779819999994),
        map: map,
        icon: {
          url: "./images/marker.png",
          size: new naver.maps.Size(30, 35),
          origin: new naver.maps.Point(4, -5),
          anchor: new naver.maps.Point(11, 35)
        }
      });
      // 마커 클릭 이벤트 처리
      naver.maps.Event.addListener(marker3, "click", function(e) {
        if (infowindow3.getMap()) {
          infowindow3.close();
        } else {
          infowindow3.open(map, marker3);
        }
      });
      // 마크 클릭시 인포윈도우 오픈
      var infowindow3 = new naver.maps.InfoWindow({
        content:
          '<a style="display:block; padding:10px; text-decoration:none; color:black;" href="./order.html"><h4 style="font-size:16px;">육수당</h4></a>',
        anchorSize: new naver.maps.Size(15, 15)
      });
    });
  </script>
</html>
